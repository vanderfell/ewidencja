<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <title>Ewidencja czasu pracy</title>
  <style>
    body { font-family: sans-serif; margin: 1em; }

    
    /* wymuszamy sta≈Çe szeroko≈õci kolumn */
#teach-absence table { table-layout: fixed; }

    /* --- styl ‚ÄûDate Picker‚Äù --- */
.date-picker {
  display: flex;
  gap: 1rem;
  align-items: flex-end;

  
}

.date-picker .date-field {
  display: flex;
  flex-direction: column;
  font-size: 0.9rem;
}

.date-picker label {
  margin-bottom: 0.25rem;
  color: #555;
  font-weight: 500;
}

.date-picker select {
  padding: 0.4rem 0.6rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  transition: border-color 0.2s;
}

.date-picker select:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 2px rgba(0,123,255,0.2);
}

    
    /* Employees tab: sidebar + content obok siebie */
#employees-container {
  display: flex;
  gap: 1rem;
  padding: 1rem 0;
}
#employees-container .sidebar {
  flex: 0 0 250px;      /* sta≈Ça szeroko≈õƒá */
  max-width: 250px;
  border-right: 1px solid #ccc;
  padding-right: 1rem;
  box-sizing: border-box;
}
#employees-container .content {
  flex: 1;              /* zajmuje resztƒô miejsca */
  overflow-x: auto;     /* poziomy scroll je≈õli za szeroko */
}

    
  .sidebar {
    width: 280px;
    background: #f5f5f5;
    overflow-y: auto;
    border-right: 1px solid #ccc;
    padding: 1rem;
  }
  .sidebar h2 {
    margin-top: 0; font-size: 1.2rem;
  }
  .dept { margin-bottom: 1rem; }
  .dept-header {
    font-weight: bold; cursor: pointer;
    padding: 0.5rem; background: #e0e0e0; border-radius: 4px;
  }
  .dept-header:hover { background: #d0d0d0; }
  .dept-list {
    list-style: none; margin: 0.5rem 0 0; padding: 0; display: none;
  }
  .dept-list li { margin: 0; }
  .dept-list a {
    display: block;
    padding: 0.4rem 0.8rem;
    color: #333;
    text-decoration: none;
    border-radius: 4px;
  }
  .dept-list a:hover,
  .dept-list a.active { background: #ddd; }

  /* Content z profile_menu.ejs */
  .content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
  }
  .content table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 1em;
  }
  .content th,
  .content td {
    border: 1px solid #999;
    padding: 8px;
    text-align: left;
  }
  .content h1, .content h2 {
    margin-top: 1em;
  }
  
    /* POPUP OVERLAY */
#emp-modal {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1001;
}

/* POPUP CONTENT */
#emp-modal .modal-content {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  padding: 2rem;
  width: 460px;
  max-width: 90%;
  animation: fadeInScale 0.2s ease-out;
}

/* HEADER */
#emp-modal .modal-content h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.25rem;
  color: #333;
}

/* FORM FIELDS */
#emp-modal .modal-content label {
  display: block;
  font-size: 0.9rem;
  margin-bottom: 0.25rem;
  color: #555;
}
#emp-modal .modal-content input,
#emp-modal .modal-content select {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 0.9rem;
  transition: border-color 0.2s;
}
#emp-modal .modal-content input:focus,
#emp-modal .modal-content select:focus {
  border-color: #007bff;
  outline: none;
}

/* BUTTONS */
.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
}
.modal-buttons button {
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}
#modal-cancel {
  background: #6c757d;
  color: #fff;
}
#modal-cancel:hover {
  background: #5a6268;
}
#emp-edit-form button[type="submit"] {
  background: #007bff;
  color: #fff;
}
#emp-edit-form button[type="submit"]:hover {
  background: #0056b3;
}

/* ANIMATION */
@keyframes fadeInScale {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}

    
    
    /* TABS */
    .tabs { display: flex; border-bottom: 2px solid #ccc; padding: 0; list-style: none; margin-bottom: 1em; }
    .tab { padding: .5em 1em; cursor: pointer; border: 1px solid #ccc; border-bottom: none;
           background: #eee; margin-right: .25em; border-radius: 4px 4px 0 0; }
    .tab.active { background: #fff; font-weight: bold; }
    .tab-content { display: none; padding: 1em; border: 1px solid #ccc; border-top: none;
                   border-radius: 0 4px 4px 4px; }
    .tab-content.active { display: block; }

    /* SUBTABS */
    .subtabs { display: flex; border-bottom: 1px solid #ccc; padding: 0; list-style: none; margin-bottom: 1em; }
    .subtab { padding: .25em .5em; cursor: pointer; border: 1px solid #ccc; border-bottom: none;
              background: #f5f5f5; margin-right: .25em; border-radius: 4px 4px 0 0; font-size: .9em; }
    .subtab.active { background: #fff; font-weight: bold; }
    .subtab-content { display: none; }
    .subtab-content.active { display: block; }

    /* TABLE */
    table { border-collapse: collapse; width: 100%; margin-bottom: 1em; font-size: .85em; }
    th, td { border: 1px solid #999; padding: 2px; text-align: center; vertical-align: middle; }
    th:first-child, td:first-child { text-align: left; }
    .name-col     { width: 120px; min-width: 120px; cursor: context-menu; font-size: .9em; }
    .calendar-cell{ width: 33px; min-width: 18px; font-size: .8em; }
    .summary-sep  { border-left: 3px solid #999 !important; }
    td.blocked, th.blocked { background: #f0f0f0; }
    input.cell-input { width: 100%; height: 100%; border: none; background: transparent; text-align: center; font: inherit; }
    /* identyczny wyglƒÖd p√≥l edycyjnych w obu tabelach */
input.cell-input-na{
  width:100%;
  height:100%;
  border:none;
  background:transparent;
  text-align:center;
  font:inherit;
  box-sizing:border-box;
  padding:0;
}


    /* highlight */
    .save-ok    { background-color: #6AF287 !important; transition: background-color 0.3s ease; }
    .save-error { background-color: #EA5460 !important; transition: background-color 0.3s ease; }

    /* CONTEXT MENUS */
    #emp-context-menu,
    #day-context-menu {
      position: absolute; display: none; list-style: none; margin: 0; padding: 0;
      background: #fff; border: 1px solid #999; z-index: 1000; width: 160px;
    }
    #emp-context-menu li,
    #day-context-menu li {
      padding: 6px 12px; cursor: pointer;
    }
    #emp-context-menu li:hover,
    #day-context-menu li:hover {
      background: #eee;
    }

    /* MODAL POPUP */
    #emp-modal {
      display: none;
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center; justify-content: center;
      z-index: 1001;
    }
    #emp-modal .modal-content {
      background: #fff; padding: 1em; border-radius: 4px; width: 300px;
    }
    .modal-buttons {
      text-align: right; margin-top: 1em;
    }
    
    /* APP HEADER */
.app-header {
  background: #007bff;
  color: #fff;
  padding: 0.75rem 1rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  position: sticky;
  top: 0;
  z-index: 100;
}
.app-header .header-content {
  display: flex;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto;
}
.app-header .logo {
  font-size: 1.5rem;
  margin-right: 0.75rem;
}
.app-header .app-title {
  font-size: 1.25rem;
  margin: 0;
  flex: 1;
}
.app-header .header-meta {
  font-size: 1.25rem;
  color: #fff;
  margin-left: 1rem;
  opacity: 1.1;
  font-weight: 600;
}

/* BODY ADJUSTMENT TO COMPENSATE STICKY HEADER */
body {
  margin: 0;
  
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}


    @media print { * { -webkit-print-color-adjust: exact; } }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="header-content">
      <div class="logo">üóÇÔ∏è</div>
      <h1 class="app-title">EWP 0.1205</h1>
      <!-- Year/Month -->
      <form action="/" method="GET" class="date-picker">
  <div class="date-field">
   
    <select id="year-select" name="year" onchange="this.form.submit()">
      <% const cy = new Date().getFullYear();
         for (let y = cy - 2; y <= cy + 2; y++) { %>
        <option value="<%=y%>"<%= y===year ? ' selected' : '' %>><%= y %></option>
      <% } %>
    </select>
  </div>
  <div class="date-field">

    <select id="month-select" name="month" onchange="this.form.submit()">
      <% const mn = ['stycze≈Ñ','luty','marzec','kwiecie≈Ñ','maj','czerwiec',
                     'lipiec','sierpie≈Ñ','wrzesie≈Ñ','pa≈∫dziernik','listopad','grudzie≈Ñ'];
         mn.forEach((m,i)=>{ const mi = i+1; %>
        <option value="<%=mi%>"<%= mi===month ? ' selected' : '' %>><%= m %></option>
      <% }) %>
    </select>
  </div>
</form>
      
    </div>
  </header>
  
  
  <ul class="tabs">
  <li class="tab active" data-tab="overview">Obs≈Çuga</li>
  <li class="tab"         data-tab="teachers">Nauczyciele</li>
  <li class="tab"         data-tab="employees">Pracownicy</li>
  <li class="tab"         data-tab="settings">Ustawienia</li>
</ul>


  <!-- ======== OBS≈ÅUGA ======== -->
  <div id="overview" class="tab-content active">
    <ul class="subtabs">
      <li class="subtab active" data-subtab="overview-table">Ewidencja</li>
      <li class="subtab"         data-subtab="kw-tab">Zestawienie kwartalne</li>
      <% emps.filter(e=>e.department==='Obs≈Çuga').forEach(emp=>{ %>
        <li class="subtab" data-subtab="card-<%=emp.id%>"><%=emp.full_name%></li>
      <% }) %>
    </ul>

    <div id="kw-tab" class="subtab-content"></div>

    <div id="overview-table" class="subtab-content active">
      
      <table>
        <thead>
  <tr>
    <th class="name-col">Imiƒô i nazwisko</th>
    <% dayInfos.forEach(function(di){ %>
      <th class="calendar-cell <%= di.status!=='P' ? 'blocked' : '' %>">
        <%= (di.day < 10 ? '0' : '') + di.day %>
      </th>
    <% }); %>
    <th class="summary-sep">D</th>
    <th>H</th>
    <% absenceTypes.forEach(function(t){ %>
      <th style="background:<%= CODE_COLORS[t.code] %>">
        <%= t.code.toUpperCase() %>
      </th>
    <% }); %>
  </tr>
  <tr>
    <th></th>
    <% dayInfos.forEach(function(di){ %>
      <th class="calendar-cell <%= di.status!=='P' ? 'blocked' : '' %>">
        <%= di.kodDow %>
      </th>
    <% }); %>
    <th class="summary-sep"></th>
    <th></th>
    <% absenceTypes.forEach(function(){ %>
      <th></th>
    <% }); %>
  </tr>
  <tr>
    <th></th>
    <% dayInfos.forEach(function(di){ %>
      <th
        class="calendar-cell status-cell <%= di.status!=='P' ? 'blocked' : '' %>"
        data-day="<%= di.day %>">
        <%= di.status %>
      </th>
    <% }); %>
    <th class="summary-sep"></th>
    <th></th>
    <% absenceTypes.forEach(function(){ %>
      <th></th>
    <% }); %>
  </tr>
</thead>

        <tbody>
  <% emps
      .filter(e => e.department==='Obs≈Çuga')
      .forEach(emp => {
        const row = summary.find(s => s.id===emp.id);
  %>
    <tr
      data-emp="<%= emp.id %>"
      data-position="<%= emp.position %>"
      data-payroll="<%= emp.payroll_number %>"
      data-daily="<%= emp.daily_norm %>"
      data-department="<%= emp.department %>">
      <td class="name-col"><strong><%= emp.full_name %></strong></td>

      <% dayInfos.forEach(di => {
           const wd   = wds.find(w => w.emp_id===emp.id && w.day===di.day) || {};
           const code = wd.code || '';
           const edit = di.status === 'P';
           const bg   = (code && isNaN(+code)) ? CODE_COLORS[code.toLowerCase()] : '';
      %>
        <td class="calendar-cell <%= edit ? '' : 'blocked' %>" style="background:<%= bg %>">
          <% if (edit) { %>
            <input class="cell-input"
                   data-emp="<%= emp.id %>"
                   data-year="<%= year %>"
                   data-month="<%= month %>"
                   data-day="<%= di.day %>"
                   value="<%= code %>" />
          <% } else { %>
            <%= code %>
          <% } %>
        </td>
      <% }); %>

      <td class="sum-days summary-sep"><%= row.days %></td>
      <td class="sum-hours"><%= row.hours %></td>
      <% absenceTypes.forEach(t => { %>
        <td
          class="sum-<%= t.code %>"
          style="<%= row[t.code] > 0 ? 'background:#ccc' : '' %>">
          <%= row[t.code] %>
        </td>
      <% }); %>
    </tr>
  <% }); %>
</tbody>
      </table>

      <button id="print-cards">Drukuj karty</button>
    </div>

    <!-- indywidualne karty pracownik√≥w -->
    <% emps.filter(e=>e.department==='Obs≈Çuga').forEach(emp=>{ %>
      <div id="card-<%=emp.id%>" class="subtab-content"></div>
    <% }) %>
  </div>

<!-- ======== PRACOWNICY ======== -->
<div id="employees" class="tab-content">
  <div id="employees-container">
    <%- include('partials/profile_inner', {
         employees  : emps,       // <- poprawna nazwa
         selectedId : null,
         emp        : null,
         notes      : [],
         summary    : summary,   // ju≈º policzone w renderDashboard
         absSummary : []
    }) %>
  </div>
</div>


<!-- ======== NAUCZYCIELE ======== -->
<div id="teachers" class="tab-content">
  <ul class="subtabs">
    <li class="subtab active" data-subtab="teach-absence">Nieobecno≈õci</li>
    <li class="subtab"        data-subtab="teach-repl">Zastƒôpstwa</li>
  </ul>

  <!-- --- NIEOBECNO≈öCI --- -->
  <div id="teach-absence" class="subtab-content active">
    <!-- tabela jak w ‚ÄûObs≈Çuga/Ewidencja‚Äù, ale tylko dzia≈Ç Nauczyciel -->
    <table>
      <thead>
        <tr>
          <th class="name-col">Imiƒô i nazwisko</th>
          <% dayInfosNau.forEach(di=>{ %>
            <th class="calendar-cell <%= di.status!=='P'?'blocked':'' %>">
              <%= (di.day<10?'0':'')+di.day %>
            </th>
          <% }) %>
          <th class="summary-sep">D</th><th>H</th>
          <% absenceTypes.forEach(t=>{ %>
            <th style="background:<%= CODE_COLORS[t.code] %>"><%= t.code.toUpperCase() %></th>
          <% }) %>
        </tr>
        <tr>
          <th></th>
          <% dayInfosNau.forEach(di=>{ %>
            <th class="calendar-cell <%= di.status!=='P'?'blocked':'' %>">
              <%= di.kodDow %>
            </th>
          <% }) %>
          <th class="summary-sep"></th><th></th>
          <% absenceTypes.forEach(()=>{ %><th></th><% }) %>
        </tr>
        <tr>
          <th></th>
          <% dayInfosNau.forEach(di=>{ %>
            <th class="calendar-cell status-cell-na <%= di.status!=='P'?'blocked':'' %>"
                data-day="<%= di.day %>"><%= di.status %></th>
          <% }) %>
          <th class="summary-sep"></th><th></th>
          <% absenceTypes.forEach(()=>{ %><th></th><% }) %>
        </tr>
      </thead>
      <tbody>
        <% emps.filter(e=>e.department==='Nauczyciel').forEach(emp=>{ 
             const row=summary.find(s=>s.id===emp.id)||{};
        %>
          <tr data-emp="<%= emp.id %>"
              data-position="<%= emp.position %>"
              data-payroll="<%= emp.payroll_number %>"
              data-daily="<%= emp.daily_norm %>"
              data-department="<%= emp.department %>">
            <td class="name-col"><strong><%= emp.full_name %></strong></td>
            <% dayInfosNau.forEach(di=>{
                 const wd = wds.find(w=>w.emp_id===emp.id&&w.day===di.day)||{};
                 const code=wd.code||'';
                 const edit=di.status==='P';
                 const bg=(code&&!isNaN(+code)?'':CODE_COLORS[code.toLowerCase()]||'');
            %>
              <td class="calendar-cell <%= edit?'':'blocked' %>" style="background:<%= bg %>">
                <% if(edit){ %>
                  <input class="cell-input-na"
                         data-emp="<%= emp.id %>"
                         data-year="<%= year %>" data-month="<%= month %>"
                         data-day ="<%= di.day %>" value="<%= code %>">
                <% } else { %><%= code %><% } %>
              </td>
            <% }) %>
            <td class="sum-days-na summary-sep"><%= row.days||0 %></td>
            <td class="sum-hours-na"><%= row.hours||0 %></td>
            <% absenceTypes.forEach(t=>{ %>
              <td class="sum-<%= t.code %>-na"><%= row[t.code]||0 %></td>
            <% }) %>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <!-- --- ZASTƒòPSTWA (pusta ‚Äì uzupe≈Çnisz p√≥≈∫niej) --- -->
  <!-- --- ZASTƒòPSTWA --- -->
<div id="teach-repl" class="subtab-content">
  <table>
    <thead>
      <tr>
        <th class="name-col">Imiƒô i nazwisko</th>
        <% dayInfosNau.forEach(di=>{ %>
          <th class="calendar-cell <%= di.status!=='P'?'blocked':'' %>">
            <%= (di.day<10?'0':'')+di.day %>
          </th>
        <% }) %>
        <th class="summary-sep">Suma</th>
      </tr>
      <tr>
        <th></th>
        <% dayInfosNau.forEach(di=>{ %>
          <th class="calendar-cell <%= di.status!=='P'?'blocked':'' %>">
            <%= di.kodDow %>
          </th>
        <% }) %>
        <th  class="summary-sep"></th>
      </tr>
      <tr>
        <th></th>
        <% dayInfosNau.forEach(di=>{ %>
          <th  class="calendar-cell status-cell-na  <%= di.status!=='P'?'blocked':'' %>"
               data-day="<%= di.day %>"><%= di.status %></th>
        <% }) %>
        <th class="summary-sep"></th>
      </tr>
    </thead>

    <tbody>
      <% emps.filter(e=>e.department==='Nauczyciel').forEach(emp=>{ 
           const row = summary.find(s=>s.id===emp.id)||{};
      %>
        <tr data-emp="<%= emp.id %>">
          <td class="name-col"><strong><%= emp.full_name %></strong></td>

          <% dayInfosNau.forEach(di=>{ 
               const wd   = wds.find(w=>w.emp_id===emp.id&&w.day===di.day)||{};
               const code = wd.code||'';
               const edit = di.status==='P';
               const bg   = (code && isNaN(+code)) ? CODE_COLORS[code.toLowerCase()]||'' : '';
          %>
            <td class="calendar-cell <%= edit?'':'blocked' %>" style="background:<%= bg %>">
              <% if(edit){ %>
                <input  class="cell-input-na"
                        data-emp  ="<%= emp.id %>"
                        data-year ="<%= year %>"
                        data-month="<%= month %>"
                        data-day  ="<%= di.day %>"
                        value     ="<%= code %>">
              <% } else { %><%= code %><% } %>
            </td>
          <% }) %>

          <td class="sum-total summary-sep"><%= row.hours||0 %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

</div>




  <!-- ======== USTAWIENIA ======== -->
  <%- include('settings') %>

  <!-- CONTEXT MENUS -->
  <ul id="emp-context-menu">
    <li id="ctx-profile">Wy≈õwietl profil‚Ä¶</li>
    <li id="ctx-edit">Edytuj pracownika‚Ä¶</li>
    <li id="ctx-note">Notatka</li>
    <li id="ctx-delete">Usu≈Ñ pracownika</li>
  </ul>
  <ul id="day-context-menu">
    <li data-code="≈ö">≈ö ‚Äì ≈öwiƒôto</li>
    <li data-code="P">P ‚Äì Dzie≈Ñ roboczy</li>
    <li data-code="-">‚Äì ‚Äì Weekend</li>
    <li data-code="DW">DW ‚Äì Dzie≈Ñ wolny</li>
    <li data-code="">Usu≈Ñ nadpisanie</li>
  </ul>

  <!-- MODAL EDIT -->
  <div id="emp-modal">
    <div class="modal-content">
      <h2>Edytuj pracownika</h2>
      <form id="emp-edit-form">
        <label>Imiƒô i nazwisko:<br><input name="full_name" required/></label>
        <label>Stanowisko:<br><input name="position"/></label>
        <label>Numer ewidencyjny:<br><input name="payroll_number"/></label>
        <label>Norma dzienna (h):<br><input type="number" name="daily_norm" step="0.25" required/></label>
        <label>Dzia≈Ç:<br>
          <select name="department" required>
            <option value="Obs≈Çuga">Obs≈Çuga</option>
            <option value="Nauczyciel">Nauczyciel</option>
          </select>
        </label>
        <div class="modal-buttons">
          <button type="button" id="modal-cancel">Anuluj</button>
          <button type="submit">Zapisz</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- MODAL: Notatka -->
<div id="note-modal" style="display:none; position:fixed; top:0; left:0;
                           width:100%; height:100%; background:rgba(0,0,0,0.5);
                           align-items:center; justify-content:center; z-index:1002;">
  <div class="modal-content" style="background:#fff; padding:1em; border-radius:4px;
                                     width:auto; max-width:90%; max-height:90%; overflow:auto;">
    <h2>Notatka</h2>
    <textarea id="note-text" style="width:400px; height:400px; margin-top:0.5em;"></textarea>
    <div class="modal-buttons" style="margin-top:1em; text-align:right;">
      <button type="button" id="note-cancel">Anuluj</button>
      <button type="button" id="note-delete" style="margin-right:0.5em;">Usu≈Ñ</button>
      <button type="button" id="note-save">Zapisz</button>
    </div>
  </div>
</div>



<!-- Modal do edycji um√≥w (ukryty na start) -->
<div id="contract-modal" class="modal" style="
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.5);
    align-items:center;
    justify-content:center;
    z-index:10000;
">
  <div class="modal-content" style="
      background:#fff;
      padding:1.5rem;
      border-radius:6px;
      width:350px;
      position:relative;
  ">
    <h3>Edycja umowy</h3>
    <form id="edit-contract-form">
      <input type="hidden" name="id" id="contract-id">
      <label>Data od:<br>
        <input type="date" name="start_date" id="contract-start" required>
      </label><br><br>
      <label>Data do:<br>
        <input type="date" name="end_date" id="contract-end">
      </label><br><br>
      <label>Norma dzienna (h):<br>
        <input type="number" name="daily_norm" id="contract-norm" step="0.25" required>
      </label><br><br>
      <div style="text-align:right;">
        <button type="button" id="contract-cancel">Anuluj</button>
        <button type="submit">Zapisz</button>
      </div>
    </form>
  </div>
</div>



  <script>window.CODE_COLORS=<%- JSON.stringify(CODE_COLORS) %>;</script>
  <script>window.YEAR=<%=year%>; window.MONTH=<%=month%>;</script>
  <script src="/script.js"></script>
</body>
</html>
