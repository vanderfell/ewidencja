<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Profil pracownika</title>
  <style>
    body { font-family: sans-serif; margin: 0; display: flex; height: 100vh; }
    .sidebar { width: 250px; background: #f5f5f5; overflow-y: auto; border-right: 1px solid #ccc; }
    .sidebar ul { list-style: none; margin: 0; padding: 0; }
    .sidebar li { margin: 0; }
    .sidebar a { display: block; padding: 10px 15px; color: #333; text-decoration: none; border-bottom: 1px solid #ddd; }
    .sidebar a.active, .sidebar a:hover { background: #e0e0e0; }
    .content { flex: 1; padding: 1em; overflow-y: auto; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
    th, td { border: 1px solid #999; padding: 8px; text-align: left; }
    h1, h2 { margin-top: 1em; }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2 style="padding: 10px 15px; margin:0;">Lista pracowników</h2>
    <ul>
      <% employees.forEach(e => { %>
        <li>
          <a href="/employees/profile?emp_id=<%= e.id %>" class="<%= e.id === selectedId ? 'active' : '' %>">
            <%= e.full_name %>
          </a>
        </li>
      <% }) %>
    </ul>
  </div>
  <div class="content">
    <% if (!emp) { %>
      <p>Wybierz pracownika z listy po lewej.</p>
    <% } else { %>
      <h1><%= emp.full_name %> (ID: <%= emp.id %>)</h1>
      <table>
        <tr><th>Stanowisko</th><td><%= emp.position %></td></tr>
        <tr><th>Dział</th><td><%= emp.department %></td></tr>
        <tr><th>Norma dzienna (h)</th><td><%= emp.daily_norm %></td></tr>
      </table>

      <h2>Notatki</h2>
      <table>
        <thead><tr><th>Rok</th><th>Miesiąc</th><th>Notatka</th></tr></thead>
        <tbody>
          <% notes.forEach(n => { %>
            <tr>
              <td><%= n.year %></td>
              <td><%= n.month %></td>
              <td><%= n.note %></td>
            </tr>
          <% }) %>
          <% if (!notes.length) { %>
            <tr><td colspan="3" style="text-align:center;">Brak notatek</td></tr>
          <% } %>
        </tbody>
      </table>

      <h2>Podsumowanie miesięczne</h2>
      <table>
        <thead>
          <tr>
            <th>Rok</th><th>Miesiąc</th><th>Przepracowane godziny</th><th>Przepracowane dni</th>
          </tr>
        </thead>
        <tbody>
          <% summary.forEach(s => { %>
            <tr>
              <td><%= s.year %></td>
              <td><%= s.month %></td>
              <td><%= s.hours %></td>
              <td><%= s.days %></td>
            </tr>
          <% }) %>
          <% if (!summary.length) { %>
            <tr><td colspan="4" style="text-align:center;">Brak danych</td></tr>
          <% } %>
        </tbody>
      </table>
    <% } %>
  </div>
</body>
</html>
